<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>gdarchivio online</title>
    <link rel="icon" type="image/png" href="https://placehold.co/32x32/000000/FFFFFF/png?text=GD" />

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Martian+Mono:wght@400;700&family=VT323&display=swap" rel="stylesheet">
    
    <style>
        /* Stili di base e fallback */
        body {
            font-family: 'Martian Mono', monospace;
            background-color: #ffffff;
            color: #000000;
        }
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #888; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #555; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
            animation: fadeIn 0.3s ease-out forwards;
        }
    </style>

    <script>
      // Configurazione di Tailwind per usare i font personalizzati
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              'martian-mono': ['"Martian Mono"', 'monospace'],
              'bitcount-single': ['"VT323"', 'monospace'], 
            },
            colors: {
              'dark-gray': '#333333',
              'cold-gray': '#888888',
            }
          }
        }
      };
    </script>
</head>
<body class="antialiased">
    <noscript>Per visualizzare questa applicazione, è necessario abilitare JavaScript.</noscript>
    <div id="root"></div>

    <!-- Librerie React -->
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    
    <!-- Script principale dell'applicazione React -->
    <script>
    // La funzione runApp viene eseguita solo quando la pagina è completamente caricata,
    // garantendo che React e ReactDOM siano disponibili.
    window.addEventListener('load', runApp);

    function runApp() {
        if (typeof React === 'undefined' || typeof ReactDOM === 'undefined') {
            console.error('React o ReactDOM non sono stati caricati.');
            return;
        }

        const { useState, useEffect, useMemo, useCallback } = React;
        const { createRoot } = ReactDOM;
        const e = React.createElement;

        // ==========================================================
        // DATI MOCK
        // ==========================================================
        const mockProducts = [
            { id: '1', name: 'Vintage Dolce & Gabbana Blazer', brand: 'Dolce & Gabbana', category: 'jackets', color: 'black', size: 'M', year: 1995, images: ['https://placehold.co/600x800/e0e0e0/333?text=D&G+Blazer+1', 'https://placehold.co/600x800/d0d0d0/333?text=D&G+Blazer+2'], description: 'Elegante blazer vintage Dolce & Gabbana della metà degli anni \'90. Artigianato italiano al suo meglio.', condition: 'excellent', material: '100% Wool', measurements: { chest: '50cm', length: '65cm' }, type: 'archive' },
            { id: '2', name: 'Prada Nylon Bag', brand: 'Prada', category: 'bags', color: 'brown', size: 'one size', year: 1999, images: ['https://placehold.co/600x800/e0e0e0/333?text=Prada+Bag'], description: 'Iconica borsa Prada in nylon del 1999. Un pezzo del lusso minimalista degli anni \'90.', condition: 'very good', material: 'Nylon and leather', measurements: { width: '30cm', height: '25cm' }, type: 'archive'},
            { id: '101', name: 'Miss Sixty Low-Rise Jeans', brand: 'Miss Sixty', category: 'pants', color: 'blue', size: 'S', year: 2003, images: ['https://placehold.co/600x800/e0e0e0/333?text=Miss+Sixty+Jeans'], description: 'Jeans a vita bassa Miss Sixty del 2003.', condition: 'very good', material: 'Cotton denim', measurements: { waist: '32cm', length: '98cm' }, type: 'product', purchaseLinks: { vinted: 'https://www.vinted.it/', vestiaire: 'https://www.vestiairecollective.com/' }},
        ];
        const mockLibraryItems = [
            { id: 'L1', name: 'Fashion History: From Ancient to Modern', author: 'Jane Doe', publisher: 'Fashion Books Inc.', year: 2015, category: 'history', images: ['https://placehold.co/600x800/e0e0e0/333?text=Book+1'], description: 'A comprehensive guide to the history of fashion.', type: 'book' },
        ];

        // ==========================================================
        // COMPONENTI ICONA INLINE (Sostituzione di Lucide)
        // ==========================================================
        const Icon = ({ name, size = 16, className = '' }) => {
            const iconProps = { xmlns: 'http://www.w3.org/2000/svg', width: size, height: size, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2, strokeLinecap: 'round', strokeLinejoin: 'round', className: className };
            const icons = {
                Search: e('svg', iconProps, e('circle', { cx: '11', cy: '11', r: '8' }), e('line', { x1: '21', y1: '21', x2: '16.65', y2: '16.65' })),
                ChevronDown: e('svg', iconProps, e('path', { d: 'm6 9 6 6 6-6' })),
                Mail: e('svg', iconProps, e('rect', { width: '20', height: '16', x: '2', y: '4', rx: '2' }), e('path', { d: 'm22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7' })),
                MapPin: e('svg', iconProps, e('path', { d: 'M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z' }), e('circle', { cx: '12', cy: '10', r: '3' })),
                ArrowLeft: e('svg', iconProps, e('path', { d: 'm12 19-7-7 7-7' }), e('path', { d: 'M19 12H5' })),
                ExternalLink: e('svg', iconProps, e('path', { d: 'M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6' }), e('polyline', { points: '15 3 21 3 21 9' }), e('line', { x1: '10', y1: '14', x2: '21', y2: '3' })),
                X: e('svg', iconProps, e('line', { x1: '18', y1: '6', x2: '6', y2: '18' }), e('line', { x1: '6', y1: '6', x2: '18', y2: '18' }))
            };
            return icons[name] || null;
        };

        // ==========================================================
        // COMPONENTI E PAGINE IMPLEMENTATE
        // ==========================================================
        const PlaceholderPage = ({ title }) => e('div', { className: 'p-8' }, `Pagina: ${title}`);
        const CollectionPage = ({ navigateTo }) => e(PlaceholderPage, { title: "Collection" });
        const ArchivePage = ({ navigateTo }) => e(PlaceholderPage, { title: "Archive" });
        const LibraryPage = ({ navigateTo }) => e(PlaceholderPage, { title: "Library" });
        const ContactPage = ({ navigateTo }) => e(PlaceholderPage, { title: "Contact" });
        
        const HomePage = ({ navigateTo }) => {
            const NavCard = ({ imageSrc, title, caption, page }) => (
                e('div', { className: "group cursor-pointer text-center", onClick: () => navigateTo(page) },
                    e('div', { className: "aspect-[4/5] sm:aspect-square bg-gray-100 overflow-hidden mb-4" },
                        e('img', { src: imageSrc, alt: title, className: "w-full h-full object-cover group-hover:scale-105 transition-transform duration-300" })
                    ),
                    e('h3', { className: "font-martian-mono font-bold uppercase tracking-wider text-sm sm:text-base", style: { fontWeight: 700 } }, title),
                    e('p', { className: "font-martian-mono text-xs text-cold-gray uppercase tracking-widest", style: { fontWeight: 400 } }, caption)
                )
            );
            
            return e('div', { className: "flex flex-col min-h-screen bg-white text-black animate-fade-in" },
                e('main', { className: "flex-grow flex flex-col justify-center items-center p-4" },
                    e('header', { className: "text-center" },
                        e('h1', { className: "font-bitcount-single text-5xl md:text-6xl" }, "gdarchivio"),
                        e('p', { className: "font-martian-mono text-dark-gray tracking-widest mt-2", style: { fontWeight: 400 } }, "fashion archive")
                    ),
                    e('nav', { className: "grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-8 my-10 sm:my-12 w-full max-w-sm md:max-w-4xl" },
                        e(NavCard, { imageSrc: "https://placehold.co/400x500/f0f0f0/333?text=Collection", title: "COLLECTION", caption: "(CURATED PIECES)", page: "collection" }),
                        e(NavCard, { imageSrc: "https://placehold.co/400x500/e0e0e0/333?text=Archive", title: "ARCHIVE", caption: "(ARCHIVE ITEMS)", page: "archive" }),
                        e(NavCard, { imageSrc: "https://placehold.co/400x500/d0d0d0/333?text=Library", title: "LIBRARY", caption: "(FASHION BOOKS)", page: "library" }),
                        e(NavCard, { imageSrc: "https://placehold.co/400x500/c0c0c0/333?text=Contact", title: "CONTACT", caption: "(GET IN TOUCH)", page: "contact" })
                    ),
                    e('button', { className: "font-martian-mono uppercase tracking-wider border border-black px-8 py-3 rounded-full hover:bg-gray-100 transition-colors text-sm", style: { fontWeight: 400 }, onClick: () => navigateTo('collection') }, "ENTER COLLECTION")
                ),
                e('footer', { className: "w-full py-6 px-4" },
                    e('div', { className: "container mx-auto text-center" },
                        e('div', { className: "border-b border-gray-300 w-20 mx-auto mb-4" }),
                        e('p', { className: "font-martian-mono text-xs text-cold-gray uppercase tracking-widest", style: { fontWeight: 400 } }, "ITALY • EST. 2025")
                    )
                )
            );
        };

        // ==========================================================
        // APPLICAZIONE PRINCIPALE E ROUTING
        // ==========================================================
        const App = () => {
            const [page, setPage] = useState('home');
            
            const navigateTo = useCallback((newPage) => {
                window.location.hash = newPage;
                setPage(newPage);
                window.scrollTo(0, 0);
            }, []);

            useEffect(() => {
                const handleHashChange = () => {
                    const hash = window.location.hash.substring(1) || 'home';
                    setPage(hash);
                };
                window.addEventListener('hashchange', handleHashChange);
                handleHashChange(); // Imposta la pagina iniziale
                return () => window.removeEventListener('hashchange', handleHashChange);
            }, []);

            const renderPage = () => {
                switch (page) {
                    case 'collection': return e(CollectionPage, { navigateTo });
                    case 'archive': return e(ArchivePage, { navigateTo });
                    case 'library': return e(LibraryPage, { navigateTo });
                    case 'contact': return e(ContactPage, { navigateTo });
                    case 'home':
                    default:
                        return e(HomePage, { navigateTo });
                }
            };
            
            return e('div', { key: page }, renderPage());
        };
        
        // --- Avvio dell'applicazione ---
        const rootElement = document.getElementById('root');
        if (rootElement) {
            const root = createRoot(rootElement);
            root.render(e(App));
        } else {
            console.error("L'elemento 'root' non è stato trovato nel DOM.");
        }
    }
    </script>
</body>
</html>